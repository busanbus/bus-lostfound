<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>ë¶€ì‚°ì‹œë‚´ë²„ìŠ¤ ë¶„ì‹¤ë¬¼ ì¡°íšŒ</title>
  <style>
    body { font-family: sans-serif; text-align: center; margin: 20px; }
    .header { display: flex; align-items: center; gap: 15px; margin-bottom: 20px; justify-content: flex-start; }
    .logo { max-width: 250px; height: auto; }
    .search-container { display: flex; justify-content: center; align-items: center; gap: 8px; margin-bottom: 16px; }
    input, button { padding: 10px; font-size: 18px; border-radius: 6px; }
    input { width: 200px; border: 1px solid #aaa; }
    button { background: #0078d4; color: #fff; border: 0; cursor: pointer; transition: all 0.2s ease; }
    button:hover { background: #005a9e; transform: translateY(-2px); }
    table { width: 100%; border-collapse: collapse; margin-top: 24px; font-size: 16px; }
    th, td { border: 1px solid #ccc; padding: 10px; }
    th { background: #f0f0f0; }
    td:first-child, td:nth-child(2) { white-space: nowrap; min-width: 120px; max-width: 200px; }
    a.tel-link, a.map-button { color: #0078d4; text-decoration: none; font-weight: bold; display: inline-flex; align-items: center; }
    a.map-button:hover { text-decoration: underline; }
    a.map-button img { width: 24px; height: 24px; margin-right: 6px; }
    .map-buttons { display: flex; gap: 16px; justify-content: center; margin-top: 8px; }
    .error { margin-top: 24px; color: red; font-weight: bold; }
  </style>
</head>
<body>
  <div class="header">
    <img src="logo.svg" alt="ë¶€ì‚°ê´‘ì—­ì‹œë²„ìŠ¤ìš´ì†¡ì‚¬ì—…ì¡°í•© ë¡œê³ " class="logo">
  </div>
  <h2>ë²„ìŠ¤ë²ˆí˜¸ë¡œ ë¶„ì‹¤ë¬¼ ì°¾ê¸°</h2>
  <div class="search-container">
    <input id="no" maxlength="6" placeholder="ì˜ˆ) 40 / 129-1 / 1003" onkeydown="if(event.key==='Enter') go()">
    <button onclick="go()">ì¡°íšŒ</button>
  </div>
  <div id="r"></div>

  <div style="margin-top:30px; text-align:left; background:#f9f9f9; border:1px solid #ccc; padding:15px; font-size:15px; line-height:1.6; border-radius:8px;">
    <h2 style="font-size:20px; margin-bottom:10px;">ğŸ“Œ ë¶„ì‹¤ë¬¼ì„ ì°¾ìœ¼ë ¤ë©´ ì´ë ‡ê²Œ í•´ ì£¼ì„¸ìš”</h2>
    <ol style="padding-left:20px;">
      <li><strong>ì •í™•í•œ ë²„ìŠ¤ë²ˆí˜¸</strong> (ì˜ˆ: 1003, 129-1 ë“±)ë¥¼ ì…ë ¥í•´ ì£¼ì„¸ìš”.</li>
      <li>ì—¬ê°ì‚¬ ì—°ë½ì²˜ê°€ ë‚˜ì˜¤ë©´, ì „í™”ë¥¼ ê±¸ì–´ <strong>ë¶„ì‹¤ë¬¼, íƒ‘ìŠ¹ ì‹œê°„, ë°©í–¥(ì¶œë°œ-ë„ì°©ì§€), ì¢Œì„ ìœ„ì¹˜</strong> ë“± ê¸°ì–µë‚˜ëŠ” ì •ë³´ë¥¼ ì•Œë ¤ ì£¼ì„¸ìš”.</li>
      <li>ê²°ê³¼ê°€ ì•ˆ ë‚˜ì˜¤ê±°ë‚˜ ì¶”ê°€ ë¬¸ì˜ ì‚¬í•­ ìˆìœ¼ì‹œë‹¤ë©´ ì•„ë˜ë¡œ ë¬¸ì˜í•´ ì£¼ì„¸ìš”. ì¹œì ˆíˆ ì‘ëŒ€í•˜ê² ìŠµë‹ˆë‹¤.</li>
    </ol>
    <h3 style="text-align:center;">ğŸ“ <strong>ë¶€ì‚°ê´‘ì—­ì‹œë²„ìŠ¤ìš´ì†¡ì‚¬ì—…ì¡°í•©</strong><br>
      <a href="tel:0517914500" class="tel-link">051-791-4500</a>
    </h3>
  </div>

  <script>
    async function go() {
      const no = document.getElementById('no').value.trim();
      const rDiv = document.getElementById('r');
      rDiv.innerHTML = '';

      if (!/^[0-9]{1,4}(-[0-9]{1,2})?$/.test(no)) {
        rDiv.innerHTML = '<div class="error">ìˆ«ì 1~4ìë¦¬ ë˜ëŠ” í•˜ì´í”ˆ í¬í•¨(ì˜ˆ: 55-1, 1003) í˜•ì‹ìœ¼ë¡œ ì…ë ¥í•˜ì„¸ìš”.</div>';
        return;
      }

      try {
        const res = await fetch(
          `https://homeapi.busanbus.or.kr/busanbus-backend/v1/routes?routeNumber=${encodeURIComponent(no)}`
        );
        const json = await res.json();
        const comps = json.data[0]?.companies;
        if (!comps || comps.length === 0) throw new Error();

        let table1 = '<table><tr><th>ìš´ìˆ˜ì‚¬</th><th>ì „í™”ë²ˆí˜¸</th></tr>';
        comps.forEach(c => {
          const name = c.headName ? `${c.headName} ${c.name}` : c.name;
          table1 += `<tr><td>${name}</td><td><a href=\"tel:${c.representativePhone}\" class=\"tel-link\">${c.representativePhone}</a></td></tr>`;
        });
        table1 += '</table>';

        let table2 = '<table><tr><th>ì£¼ì†Œ</th></tr>';
        comps.forEach(c => {
          table2 += `<tr><td>${c.address}</td></tr>`;
          const addrEnc = encodeURIComponent(c.address);
          const naverUrl = `https://map.naver.com/v5/search/${addrEnc}`;
          const kakaoUrl = `https://map.kakao.com/link/search/${addrEnc}`;
          table2 += '<tr><td>' +
            '<div class="map-buttons">' +
            `<a href=\"${naverUrl}\" target=\"_blank\" class=\"map-button\">` +
            '<img src="navermap.webp" alt="ë„¤ì´ë²„ ì§€ë„">ë„¤ì´ë²„ ì§€ë„</a>' +
            `<a href=\"${kakaoUrl}\" target=\"_blank\" class=\"map-button\">` +
            '<img src="kakaomap_basic.png" alt="ì¹´ì¹´ì˜¤ë§µ">ì¹´ì¹´ì˜¤ë§µ</a>' +
            '</div>' +
          '</td></tr>';
        });
        table2 += '</table>';

        rDiv.innerHTML = '<p style="color:#000000; font-weight:bold; margin:16px 0;">â€» ì „í™”ëŠ” ì˜ì—…ì‹œê°„ ë‚´ (06:00 ~ 22:00) ê°€ëŠ¥í•©ë‹ˆë‹¤.</p>' + table1 + table2;
      } catch (err) {
        rDiv.innerHTML = '<div class="error">âš ï¸ í•´ë‹¹ ë²„ìŠ¤ë²ˆí˜¸ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</div>';
      }
    }
  </script>
</body>
</html>
